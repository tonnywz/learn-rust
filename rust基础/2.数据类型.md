# 数据类型

rust 是静态类型语言,rust 在编译时就必须知道所有变量的类型.我们也说 rust 是一种强类型语言区别于 js,python 这样的弱类型语言.在使用一个变量时必须要让 rust 知道这个变量的数据类型是什么.不同的数据类型有不同的数据处理方式.rust 的内建类型分为两大类：标量 scalar 类型和复合 compound 类型.

## 标量类型

标量类型代表一个单独的值.Rust 有四种基本的标量类型,分别是 _整型_ , _浮点型_ , _布尔类型_ 和 _字符类型_.

### 整型

rust 提供了不同长度的整型,长度分别为 8bit,16bit,32bit,64bit,128bit,arch(类型长度依赖计算机的架构.如果是 32 位的系统,那么长度就是 32 位.如果是 64 位系统,长度就是 64 位)这些不同长度的又可以分为有符号和无符号.

8bit 对应的类型：_i8_(有符号), _u8_(无符号)

16bit 对应的类型：_i16_(有符号), _u16_(无符号)

32bit 对应的类型：_i32_(有符号), _u32_(无符号)

64bit 对应的类型：_i64_(有符号), _u64_(无符号)

128bit 对应的类型：_i128_(有符号), _u128_(无符号)

arch 对应的类型：_isize_(有符号), _usize_(无符号)

#### 有符号与无符号的区别：

无符号的整型只能表示自然数即非负整数,有符号的整型可以表示负数.他们的取值范围与他们的长度有关.  
有符号的整型表示范围为 [−2<sup>n−1</sup>,2<sup>n-1</sup>−1]  
无符号的整型表示范围为 [0, 2<sup>n</sup>-1]
计算机操作系统中数据度量最小的单位是 bit(字位),一个 bit 代表 0 或 1.byte(字节)是信息量单位.1byte=8bit.

#### _例如_：i8 与 u8 的取值范围

i8 的取值范围是[−2<sup>7</sup>,2<sup>7</sup>−1],即 i8 的取值范围是[-128,127]  
u8 的取值范围是[0, 2<sup>8</sup>-1],即 u8 的取值范围是[0,255]  
在开发过程中要充分的考虑到数值的范围,如果超出则会造成整型溢出.

#### 示例

```
fn main() {
    // 申明一个变量a,并将值10赋值给了a.由于申明的时候没有指定变量a具体的数据类型,rust根据值10推导变量a的类型为i32整型,rust整型默认数据类型为i32.
    let a = 10;
    println!("a => {}", a);
    // 申明一个i8的整型变量b,并将值15赋值给了b.mut是mutable(可变)的缩写,在声明变量是加上mut,表明该变量接下来可以被重复赋值.
    let mut b: i8 = 15;
    println!("b => {}", b);
    // 上面介绍了i8类型的取值范围是[-128,127],如果将128赋值给b,就会导致整型溢出.rust在编译的过程会检查并报错.这也突出了rust强调的数据安全性,好奇的小伙伴可以尝试一下.
    b = 31;
    println!("b => {}", b);
    // 这里的下划线暂时理解为占位符,在整型中没有特殊含义.
    let c: u32 = 1_2_3_456;
    println!("c => {}", c); // 123456
}
```

### 浮点型

浮点类型与整型不同的是,浮点类型是带小数点的数字.rust 的浮点类型主要有两个 f32 和 f64,长度分别是 32bit 和 64bit,默认类型是 f64,因为现在的 CPU 中 f64 与 f32 运算的速度几乎相同,f64 的精度要更高.

#### 示例

```
fn main() {
    // 申明一个变量a,rust根据值123.0推导变量a的类型为f64浮点类型并将值123.0赋值给变量a,rust浮点类型默认为f64.
    let a = 123.0;
    println!("a => {}", a);
    // 申明一个f64的浮点类型的变量b,并将值123.0赋值给a.
    let b: f64 = 123.0;
    println!("b => {}", b);
    // 申明一个浮点类型的变量c,并将值123.0赋值给a,这里指定了值(132.0)的数据类型,所以c的类型也为f64.
    let c = 123.0f64;
    println!("c => {}", c);
    // 申明一个f32的浮点类型的变量e,并将值123.0的f32浮点类型赋值给a.
    let e: f32 = 123.0f32;
    println!("e => {}", e);
}
```

### 布尔类型

rust 语言也有布尔类型,同大多数编程语言一样,rust 语言的布尔型值也只有 true 和 false.

```
fn main() {
    // 申明一个变量a,rust根据值true推导变量a的类型为布尔并将值true赋值给变量a.
    let a = true;
    println!("a => {}", a);
    // 申明一个变量b,等号右边是一个表达式1>2,rust会根据表达式的结果false并推导变量b的类型为布尔类型,并将false赋值给变量a.
    let b = 1 > 2;
    println!("b => {}", b);
    // 申明一个布尔类型的变量c,并将值false赋值给变量c.
    let c: bool = false;
    println!("c => {}", c);
}
```

### 字符类型

rust 语言也有字符类型,rust 的 char 类型是语言中最原生的字母类型,如下代码展示了如何使用它.(char 由单引号指定,不同于字符串使用双引号)

```
fn main() {
    // 申明一个字符类型的变量a,并将值'a'赋值给变量a.注意这里的值'a'须用''单引号,如果使用""双引号怎是另外一种类型 -- string
    let a: char = 'a';
    println!("a => {}", a);
    // 申明一个变量b,由于没有指定b具体的数据类型,rust跟值'b'推导变量b的类型为字符类型
    let b = 'b';
    println!("b => {}", b);
}
```

## 复合类型

复合类型(Compound types)可以将多个其他类型的值组合成一个类型.Rust 有两个原生的复合类型:元组(tuple)和数组(array)

### 元组

元组(tuples)是含有多个其他数据类型的值大小固定的有序列表.其表现形式为包含在"()"圆括号中并以","逗号分隔的列表.元组中的每个位置都有类型,这些类型不一定相同.

### 数组
